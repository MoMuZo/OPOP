<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DbD 吊り回数カウンター</title>
  <style>
    body {
      font-family: 'Segoe UI Emoji', sans-serif;
      background-color: #1a1a1a;
      color: #fff;
      margin: 0;
      padding: 0.5rem;
      touch-action: manipulation;
    }

    h1 {
      text-align: center;
      font-size: 1.2rem;
      margin: 0.2rem 0 0.5rem;
    }

    .container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.4rem;
      max-width: 420px;
      margin: 0 auto;
    }

    .counter {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      background-color: #2c2c2c;
      padding: 0.4rem 0.6rem;
      border-radius: 6px;
      font-size: 0.95rem;
    }

    .left {
      display: flex;
      flex-direction: column;
    }

    .label {
      font-size: 0.95rem;
      margin-bottom: 0.2rem;
    }

    .value-display {
      font-size: 1.5rem;
      min-height: 1.8rem;
    }

    .buttons {
      display: flex;
      gap: 0.4rem;
      margin: 0.2rem 0;
    }

    .deh-check {
      font-size: 0.8rem;
    }

    input[type="checkbox"] {
      transform: scale(1.1);
      margin-right: 0.3em;
    }

    button {
      font-size: 1.2rem;
      padding: 0.2rem 0.6rem;
      background-color: #444;
      border: none;
      border-radius: 4px;
      color: #fff;
      user-select: none;
      touch-action: manipulation;
    }

    button:hover {
      background-color: #666;
    }

    .reset-btn {
      margin: 0.8rem auto 0.4rem;
      display: block;
      background-color: crimson;
      padding: 0.5rem 1rem;
      font-size: 1rem;
    }

    .reset-btn:hover {
      background-color: darkred;
    }
  </style>
</head>
<body>
  <h1>DbD 吊り回数カウンター</h1>
  <div class="container" id="counters"></div>
  <button class="reset-btn" onclick="resetAll()">🔄 全員リセット</button>

  <script>
    const states = ["😎", "😯", "😭", "☠️"];
    const labels = ["🏃‍♂️ プレイヤー 1", "🏃‍♀️ プレイヤー 2", "🏃‍♂️ プレイヤー 3", "🏃‍♀️ プレイヤー 4"];
    const counters = [];

    function createCounter(index) {
      const wrapper = document.createElement("div");
      wrapper.className = "counter";

      const left = document.createElement("div");
      left.className = "left";

      const label = document.createElement("div");
      label.className = "label";
      label.textContent = labels[index];

      const value = document.createElement("div");
      value.className = "value-display";
      value.textContent = states[0];

      const btnGroup = document.createElement("div");
      btnGroup.className = "buttons";
      const upBtn = document.createElement("button");
      upBtn.textContent = "➕";
      upBtn.onclick = () => {
        const currentIndex = states.indexOf(value.textContent);
        if (currentIndex < states.length - 1) {
          value.textContent = states[currentIndex + 1];
        }
      };

      const downBtn = document.createElement("button");
      downBtn.textContent = "➖";
      downBtn.onclick = () => {
        const currentIndex = states.indexOf(value.textContent);
        if (currentIndex > 0) {
          value.textContent = states[currentIndex - 1];
        }
      };

      btnGroup.appendChild(downBtn);
      btnGroup.appendChild(upBtn);

      const dehCheck = document.createElement("label");
      dehCheck.className = "deh-check";
      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      dehCheck.appendChild(checkbox);
      dehCheck.append("デッハ所持");

      left.appendChild(label);
      left.appendChild(value);
      left.appendChild(btnGroup);
      left.appendChild(dehCheck);

      wrapper.appendChild(left);
      document.getElementById("counters").appendChild(wrapper);
      counters.push(value);
    }

    function resetAll() {
      counters.forEach((counter) => (counter.textContent = states[0]));
      document.querySelectorAll("input[type='checkbox']").forEach((cb) => (cb.checked = false));
    }

    for (let i = 0; i < 4; i++) {
      createCounter(i);
    }
  </script>
</body>
</html>
